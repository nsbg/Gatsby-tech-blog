---
title: "ë©€ê³ ë„ í—˜í•œ ì˜¤í”ˆì†ŒìŠ¤ ì½”ë“œ ê¸°ì—¬ì˜ ê¸¸(ê°€ì œ)" 
date: "2025-09-05T12:00:00.000+09:00"
description: Hugging Face PEFT ë¼ì´ë¸ŒëŸ¬ë¦¬ ì½”ë“œ ê¸°ì—¬ë¥¼ í–¥í•œ ì—¬ì •
category: "Contribution"
---
ì¼ë‹¨ ë§‰ ì ì–´ë†“ê³  ì‘ì—… ëë‚˜ë©´ ì •ë¦¬í•´ì•¼ê² ë‹¤.

ê¸°ì¡´ kasa ì½”ë“œ: ê·¸ëƒ¥ peft ë¼ì´ë¸ŒëŸ¬ë¦¬ ì•ˆì— ë°”ë¡œ êµ¬í˜„í•œ ë“¯

hfì—ì„œ ì›í•˜ëŠ” ë°©í–¥: ì‚¬ìš©ìê°€ í™œì„±í™”í–ˆì„ ë•Œë§Œ ì“¸ ìˆ˜ ìˆê²Œ í´ë˜ìŠ¤ë¡œ ë”°ë¡œ ë¹¼ëŠ” ê²ƒ

### Benjamin guide (1)
![benjamin 1](./img/b1.png)

ì´ ë‹¨ê³„ ì‘ì—…í•˜ë‹¤ê°€ ì–´ë–¤ íŒŒì¼ì„ ì–´ë–»ê²Œ ìˆ˜ì •í•´ì•¼í•˜ëŠ”ì§€ ì•„ì˜ˆ ê°ì„ ëª» ì¡ìŒ

ê·¸ë˜ì„œ ì§ˆë¬¸ ë‚¨ê¹€
![me 1](./img/m1.png)

### Benjamin guide (2)
ê·¸ëŠ” ì²œì‚¬ì˜€ìŒ

![benjamin 2-1](./img/b2-1.png)
![benjamin 2-2](./img/b2-2.png)

- KasaLinearVariant ì¶”ê°€í•´ë’€ëŠ”ë° ì´ê²Œ ê°€ì¥ ì¤‘ìš”í•œ ê±°ë¼ ì œëŒ€ë¡œ ì¶”ê°€í•œ ê²Œ ë§ìŒ

- í•˜ì§€ë§Œ KasaLinearVariant ë‚´ë¶€ ì½”ë“œ ë³€ê²½ í•„ìš”

    - DoRAì—ë§Œ í•´ë‹¹í•˜ê³  KaSAì—ì„œëŠ” ë¶ˆí•„ìš”í•œ ì½”ë“œê°€ ì¼ë¶€ ìˆê¸° ë•Œë¬¸
    
    - ê·¼ë° ì´ ì‘ì—…ì´ ì§€ê¸ˆ ìš°ì„ ìˆœìœ„ëŠ” ì•„ë‹ˆë¼ì„œ ë³€ê²½í•´ì•¼ í•œë‹¤ëŠ” ê²ƒë§Œ ì¸ì§€í•˜ê³  ìˆìœ¼ë©´ ë¨

- lora/layer.pyì— self.use_kasa ì†ì„±ì„ ì¶”ê°€í•´ë†¨ëŠ”ë° ì´ê±´ í•„ìš”ì—†ìŒ

    - self.use_doraëŠ” ê³¼ê±° ì½”ë“œì™€ í˜¸í™˜ì„±ì„ ìœ ì§€í•˜ë ¤ê³  ìˆëŠ” ê²ƒë¿ì„

- lora/layer.pyëŠ” ì•„ë˜ì²˜ëŸ¼ ìˆ˜ì •í•˜ë©´ ë¨
```Python
  def resolve_lora_variant(self, *, use_dora: bool, use_kasa: bool, **kwargs) -> Optional[LoraVariant]:
        if use_dora and use_kasa:
            raise ValueError("Cannot use DoRA and KaSA at the same time, please choose only one.")

        variant = None
        if use_dora:
            from .variants import DoraLinearVariant

            variant = DoraLinearVariant()
        elif use_kasa:
            ...

        return variant
```
    
ğŸ’­ ì½”ë“œë¸”ëŸ­ê¹Œì§€ ì¶”ê°€í•´ì„œ ì„¤ëª…í•´ì£¼ëŠ” ë©”ì¸í…Œì´ë„ˆì—ê²Œ ê°ë™ ì•ˆ ë°›ì„ ì‚¬ëŒ ì—†ë‹¤ê³  ë³¸ë‹¤ ì§„ì§œë¡œ

- ìœ„ë‘ ë¹„ìŠ·í•œ ë°©ì‹ìœ¼ë¡œ ë‹¤ë¥¸ LoRA ë ˆì´ì–´ë“¤ì˜ resolve_lora_variant ë©”ì„œë“œë„ KaSAì™€ í•¨ê»˜ ì‘ë™í•˜ëŠ”ì§€ ì—¬ë¶€ì— ë”°ë¼ ì—…ë°ì´íŠ¸ í•„ìš”(KaSAê°€ Conv2d ë“±ê³¼ í•¨ê»˜ ì‘ë™í•˜ëŠ”ì§€ëŠ” í™•ì‹¤í•˜ì§€ ì•ŠìŒ)

ğŸ’­ ë‚´ê°€ ì™œ ì†ì„ ëª» ëŒ€ê³  ìˆì—ˆì„ê¹Œ? â†’ ì–´ë–¤ ê²Œ LoRA ë ˆì´ì–´ì¸ì§€ ëª¨ë¥´ëŠ” ìƒíƒœë¡œ ì½”ë“œë¶€í„° ê³ ì¹˜ë ¤ê³  í–ˆê¸° ë•Œë¬¸ì¸ ë“¯